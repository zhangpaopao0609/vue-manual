# 13 异步组件和函数式组件

## 13.1 异步组件要解决的问题

从根本上讲，异步组件的实现完全不需要任何框架层面的支持，用户可以完全自己实现：

```js
// utils
const add = (a, b)  => {
  return a + b;
}

export {
  add
}
```

直接使用 ES 提供的动态 import 方法就可以实现一个异步组件

```js
// index.js
const loader = () => import('./utils.js');

loader()
  .then((utils) => {
    const { add } = utils;
    const res = add(1, 2);
    console.log(res);
  })
```

如果我们用 import 来动态加载一个组件，上面的方式基本可以了，只是说，这样实现还存在一些缺陷：
- 如果加载失败或者加载超时，是否要渲染 Error 组件
- 组件在加载时，是否要展示占位的内容？例如渲染一个 Loading 组件。
- 组件加载的速度可能很快，也可能很慢，是否要设置一个延迟展示 Loading 组件的事件？比如，如果组件在 200ms 内没有加载成功才展示 Loading 组件，这样可以避免由组件加载过快所导致的闪烁。
- 组件加载失败后，是否需要重试

这些问题都是实际开发中需要用到的，所以为了更好地解决这些问题，就需要在框架层面为异步组件提供更好的封装，所要提供的能力与上对应：
- 允许用户指定加载出错时要渲染的组件
- 允许用户指定 Loading 组件，以及延迟展示的时间
- 允许用户设置加载组件的超时事件
- 组件加载失败时，为用户提供重试的机制。